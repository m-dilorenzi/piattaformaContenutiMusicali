openapi: "3.0.0"
info:
  title: "Piattaforma Contenuti Musicali"
  version: "1.0"
  description: Documentazione che descrive l'utilizzo delle API messe a disposizione dalla Piattaforma Contenuti Musicali, fruibile tramite l'utilizzo del bot di Telegram @FindYourFavouriteMusicBot. Per maggiori informazioni, usufruire della repository dedicata su GitHub contenente la descrizione della struttura della piattaforma ed una specifica maggiormente dettagliata.<br><br><a href="https://github.com/m-dilorenzi/piattaformaContenutiMusicali.git">Repository GitHub</a>

servers:
  - url: "https://piattaformacontenutimusicali.herokuapp.com"

tags:
- name: help
  description: Mostra all'utente tutte le funzioni disponibili.
- name: iTunes
  description: Permette all'utente di ricercare un brano o una pagina di un artista all'interno dell'iTunes Store. 
- name: YouTube
  description: Permette all'utente di ricercare video musicali su YouTube.
- name: Spotify
  description: Permette all'utente di ricercare un brano su Spotify. 

paths:
  /help:
    get:
      tags:
      - help
      summary: Mostra le funzioni disponibili
      description: Visualizza all'utente le funzionalità fornite dall'API
      
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  text:
                    type: string
                    example: Benvenuto nel bot FindYourFavouriteMusic!\nI possibili comandi sono:\n1. /searchsongbyparameter\n  Permette di ricercare una canzone o una lista di canzoni tramite parametri come nome della canzone, artista, album, ecc.ecc. La ricerca puo' essere eseguita anche tramite un insieme di termini.\n2. /getartistpagebyname\n  Permette di ricercare la pagina iTunes di un cantante (o le pagine nel caso in cui i risultati della ricerca siano piu' di uno) alla quale si potra' poi accedere successivamente tramite l'apposito link che verra' mostrato.\n3. /searchyoutubevideos\n  Mostra i primi 5 video su YouTube che soddisfano i requisiti specificati nella ricerca.\n4. /searchsongonspotify\n  Mostra al piu' 5 canzoni con il rispettivo link di Spotify che soddisfano i requisiti specificati nella ricerca dall'utente.
        '400':
          description: bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 400
                  message: Bad Request
        '500':
          description: internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 500
                  message: Try later
        
        
      
  /searchiTunesSong/{terminiDiRicerca}:
    get:
      tags:
        - iTunes
      summary: Permette la ricerca su iTunes di un brano 
      description: Specificati i termini di ricerca, quali titolo del brano, l'album di appartenenza o l'autore, questa funzione permette di ricercare all'interno dell'iTunes Store un brano.
      parameters:
        - in: path
          name: terminiDiRicerca
          description: Termini utilizzati per la ricerca del brano. Più termini verranno specificati, più preciso sarà il risultato.
          required: true
          schema:
            type: string
            default: prova
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultCount: 
                    type: integer
                    example: 1
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        wrapperType:
                          type: string
                          example: track
                        kind:
                          type: string
                          example: song
                        artistId:
                          type: integer
                          example: 4527846
                        collectionId:
                          type: integer
                          example: 4634565
                        trackId:
                          type: integer
                          example: 8377437
                        artistName:
                          type: string
                          example: Vasco Rossi
                        collectionName:
                          type: string
                          example: Nessun pericolo... per te
                        trackName:
                          type: string
                          example: Sally
                        collectionCensoredName:
                          type: string
                          example: Nessun pericolo... per te
                        trackCensoredName:
                          type: string
                          example: Sally
                        artistViewUrl:
                          type: string
                          example: https://music.apple.com/us/album/vasco-rossi/569865206?i=569865207&uo=4
                        collectionViewUrl:
                          type: string
                          example: https://music.apple.com/us/album/vasco-rossi/569865206?i=569865207&uo=4
                        trackViewUrl:
                          type: string
                          example: https://music.apple.com/us/album/vasco-rossi/569865206?i=569865207&uo=4
                        previewUrl:
                          type: string
                          example: https://audio-ssl.itunes.apple.com/itunes-assets/Music/v4/66/6b/11/666b111f-e36a-0ea3-d065-a39f348f7eb2/mzaf_1117889230080946932.plus.aac.p.m4a
                        artworkUrl30:
                          type: string
                          example: https://is3-ssl.mzstatic.com/image/thumb/Music71/v4/10/7b/63/107b63dd-f5ee-f079-843d-f45dfcdabdb8/source/30x30bb.jpg
                        artworkUrl60:
                          type: string
                          example: https://is3-ssl.mzstatic.com/image/thumb/Music71/v4/10/7b/63/107b63dd-f5ee-f079-843d-f45dfcdabdb8/source/60x60bb.jpg
                        artworkUrl100:
                          type: string
                          example: https://is3-ssl.mzstatic.com/image/thumb/Music71/v4/10/7b/63/107b63dd-f5ee-f079-843d-f45dfcdabdb8/source/100x100bb.jpg
                        collectionPrice:
                          type: number
                          example: 12.99
                        trackPrice:
                          type: number
                          example: 1.29
                        releaseDate:
                          type: string
                          example: "1996-12-21T07:00:00Z"
                        collectionExplicitness:
                          type: string
                          example: notExplicit
                        trackExplicitness:
                          type: string
                          example: notExplicit
                        discCount:
                          type: integer
                          example: 1 
                        discNumber:
                          type: integer
                          example: 1 
                        trackCount:
                          type: integer
                          example: 3 
                        trackNumber:
                          type: integer
                          example: 1 
                        trackTimeMillis:
                          type: integer
                          example: 243750
                        country:
                          type: string
                          example: ITA
                        currency:
                          type: string
                          example: EUR
                        primaryGenreName:
                          type: string
                          example: Dance
                        isStreamable:
                          type: boolean
                          example: true
                        
                        
                        
        '400':
          description: bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 400
                  message: Bad Request
        '500':
          description: internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 500
                  message: Try later
  
  /searchiTunesArtist/{terminiDiRicerca}:
    get:
      tags:
        - iTunes
      summary: Permette la ricerca su iTunes di un artista 
      description: Specificato il termine di ricerca, ovvero il nome dell'artista da ricercare, questa funzione permette di ricercare all'interno dell'iTunes Store un artista.
      parameters:
        - in: path
          name: terminiDiRicerca
          description: Termini utilizzati per la ricerca dell'artista.
          required: true
          schema:
            type: string
            default: prova
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultCount: 
                    type: integer
                    example: 1
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        wrapperType:
                          type: string
                          example: artist
                        artistType:
                          type: string
                          example: Artist
                        artistName:
                          type: string
                          example: Vasco Rossi
                        artistLinkUrl:
                          type: string
                          example: https://music.apple.com/us/artist/vasco-rossi/14589739?uo=4
                        artistId:
                          type: integer
                          example: 14589739
                        amgArtistId:
                          type: integer
                          example: 210021
                        primaryGenreName:
                          type: string
                          example: Rock
                        primaryGenreId:
                          type: integer
                          example: 21
                          
        '400':
          description: bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 400
                  message: Bad Request
        '500':
          description: internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 500
                  message: Try later
                  
  /searchYoutubeVideos/{terminiDiRicerca}:
    get:
      tags:
        - YouTube
      summary: Permette la ricerca di video su YouTube 
      description: Specificato il termine di ricerca, ovvero il titolo della canzone, o l'artista, questa funzione permette di ricercare all'interno di YouTube dei video musicali.
      parameters:
        - in: path
          name: terminiDiRicerca
          description: Termini utilizzati per la ricerca del video.
          required: true
          schema:
            type: string
            default: prova
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  kind: 
                    type: string
                    example: youtube#videoListResponse
                  etag:
                    type: string
                    example: 8jEFfXBrqiSrcF6Ee7MQuz8XuAM/1-IegeKdUVdKyyIiDUf7o5ot2MI\
                  pageInfo:
                    type: object
                    properties:
                      totalResults: 
                        type: integer
                        example: 5
                      resultsPerPage:
                        type: integer
                        example: 5
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        kind: 
                          type: string
                          example: youtube#video
                        etag: 
                          type: string
                          example: "\"8jEFfXBrqiSrcF6Ee7MQuz8XuAM/AUXILX0NKl3BUll_Fh-Ks\""
                        id:
                          type: string
                          example: 1dtNaPRZHkk
                        snippet:
                          type: object
                          properties:
                            publishedAt:
                              type: string
                              example: "2009-08-02T14:21:45.000Z"
                            channelId: 
                              type: string
                              example: UC1l8ExtfFqwTa5i1-xqvaew
                            title: 
                              type: string
                              example: vasco rossi - sally
                            description: 
                              type: string
                              example: una delle canzoni piu' belle di vasco
                            thumbnails:
                              type: object
                              properties:
                                default:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                      example: https://i.ytimg.com/vi/1dtNaPRZHkk/default.jpg
                                    width: 
                                      type: integer
                                      example: 120
                                    height: 
                                      type: integer
                                      example: 90
                                medium:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                      example: https://i.ytimg.com/vi/1dtNaPRZHkk/mqdefault.jpg
                                    width: 
                                      type: integer
                                      example: 320
                                    height: 
                                      type: integer
                                      example: 120
                                high:
                                  type: object
                                  properties:
                                    url:
                                      type: string
                                      example: https://i.ytimg.com/vi/1dtNaPRZHkk/hqdefault.jpg
                                    width: 
                                      type: integer
                                      example: 480
                                    height: 
                                      type: integer
                                      example: 360
                            channelTitle:
                              type: string
                              example: Shasa Topa
                            tags:
                              type: array
                              items:
                                type: string
                                example: 
                                - "Vasco"
                                - "Rossi"
                                - "Sally"
                                  
                            categoryId: 
                              type: integer
                              example: 10
                            liveBroadcastContent: 
                              type: string
                              example: none
                            localized:
                              type: object
                              properties:
                                title: 
                                  type: string
                                  example: vasco rossi - sally
                                description: 
                                  type: string
                                  example: "una delle canzoni piu' belle di vasco"
                            
                                
        '400':
          description: bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 400
                  message: Bad Request
        '500':
          description: internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 500
                  message: Try later
  
  /searchSongOnSpotify/{terminiDiRicerca}/{token}:
    get:
      tags:
        - Spotify
      summary: Permette la ricerca di un brano su Spotify 
      description: Specificato il termine di ricerca, ovvero il titolo della canzone, o l'artista, ed un token valido, questa funzione permette di ricercare all'interno di Spotify un brano.
      parameters:
        - in: path
          name: terminiDiRicerca
          description: Termini utilizzati per la ricerca del video.
          required: true
          schema:
            type: string
            default: prova
        - in: path
          name: token
          description: Token temporaneo utilizzato per effettuare la ricerca su Spotify
          required: true
          schema:
            type: string
            default: token
      responses:
        '200':
          description: success
          content:
            application/json:
              schema:
                type: object
                properties:
                  tracks: 
                    type: object
                    properties:
                      href:
                        type: string
                        example: https://api.spotify.com/v1/search?query=ciao+coez&type=track&market=IT&offset=0&limit=5
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            album:
                              type: object
                              properties:
                                album_type:
                                  type: string
                                  example: album
                                artists:
                                  type: array
                                  items:
                                    type: object
                                    properties:
                                      external_urls:
                                        type: object
                                        properties:
                                          spotify:
                                            type: string
                                            example: https://open.spotify.com/artist/5dXl3n4
                                      href:
                                        type: string
                                        example: https://api.spotify.com/v1/artists/5d7Mne3n
                                      id: 
                                        type: string
                                        example: 5dXlc7MnpaTeUIsHLVe3n4
                                      name: 
                                        type: string
                                        example: Coez
                                      type: 
                                        type: string
                                        example: artist
                                      uri: 
                                        type: string
                                        example: spotify:artist:5dXlc7MnpaTeUIsHLVe3n4
                                available_markets:
                                  type: array
                                  items:
                                    type: string
                                    example:
                                      - "EN"
                                      - "IT"
                                external_urls:
                                        type: object
                                        properties:
                                          spotify:
                                            type: string
                                            example: https://open.spotify.com/album/3aKazjsiS8lDp
                                href: 
                                  type: string
                                  example: https://api.spotify.com/v1/albums/3aKazS8lDp
                                id: 
                                  type: string
                                  example: 3aKazjcDl544T21siS8lDp
                                images:
                                  type: array
                                  items:
                                    type: object
                                    example:
                                      height: 640
                                      url: https://i.scdn.co/image/b611ce884c93e6b
                                      width: 640
                                name: 
                                  type: string
                                  example: Faccio un casino
                                release_date:
                                  type: string
                                  example: "2017-05-05"
                                release_date_precision: 
                                  type: string
                                  example: day
                                total_tracks: 
                                  type: integer
                                  example: 12
                                type: 
                                  type: string
                                  example: album
                                uri: 
                                  type: string
                                  example: spotify:album:3aKazjcDl544T21siS8lDp
                    
                                
                            artists:
                              type: array
                              items:
                                type: object
                                properties:
                                  external_urls:
                                    type: object
                                    properties:
                                      spotify:
                                        type: string
                                        example: https://open.spotify.com/artist/5dXlc7M4
                                  href: 
                                    type: string
                                    example: https://api.spotify.com/v1/artists/5dXl3n4
                                  id: 
                                    type: string
                                    example: 5dXlc7MnpaTeUIsHLVe3n4
                                  name: 
                                    type: string
                                    example: Coez
                                  type:
                                    type: string
                                    example: artist
                                  uri: 
                                    type: string
                                    example: spotify:artist:5dXlc7MnpaTeUIsHLVe3n4
                            
                            available_markets:
                              type: array
                              items:
                                type: string
                                example:
                                  - "EN"
                                  - "IT"
                            disc_number: 
                              type: integer
                              example: 1
                            duration_ms: 
                              type: integer
                              example: 219360
                            explicit: 
                              type: boolean
                              example: false
                            external_ids: 
                              type: object
                              properties:
                                isrc:
                                  type: string
                                  example: ITNTP1700004
                            external_urls: 
                              type: object
                              properties:
                                spotify: 
                                  type: string
                                  example: https://open.spotify.com/track/3OMEBBK44d
                            href: 
                              type: string
                              example: https://api.spotify.com/v1/tracks/3OMEBK44d
                            id:
                              type: string
                              example: 3OME70nD4TS08u5XBBK44d
                            is_local: 
                              type: boolean
                              example: false
                            name: 
                              type: string
                              example: Ciao
                            popularity: 
                              type: integer
                              example: 50
                            preview_url: 
                              type: string
                              example: https://p.scdn.co/mp3-preview/c89c36adeb89779a2a45d8c4bdf135acd7ef65ce?cid=feedf0f81c40480b856ccbc83cbd567d
                            track_number: 
                              type: integer
                              example: 2
                            type: 
                              type: string
                              example: track
                            uri: 
                              type: string
                              example: spotify:track:3OME70nD4TS08u5XBBK44d
                      limit: 
                        type: integer
                        example: 5
                      next: 
                        type: string
                        example: null
                      offset: 
                        type: integer
                        example: 0
                      previous: 
                        type: string
                        example: null
                      total: 
                        type: integer
                        example: 1      
                                
        '400':
          description: bad request
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 400
                  message: Bad Request
                  
        '401':
          description: token expired
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 401
                  message: token expired
        
        '500':
          description: internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: integer
                  message: 
                    type: string
                example:
                  result: 500
                  message: Try later